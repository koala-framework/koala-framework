<?phpclass Vpc_Directories_Category_Detail_List_Component extends Vpc_Directories_List_Component{    public function getSelect()    {        $select = parent::getSelect();        $tableName = Vpc_Abstract::getSetting(            $this->getData()->parent->parent->componentClass, 'categoryToItemTableName'        );        $refData = self::getTableReferenceData($tableName);        if (!Vpc_Abstract::getSetting(get_class($this), 'generatorJoins')) {            $select->join($refData['tableName'],                          $refData['tableName'].'.'.$refData['itemColumn'].'='                            .$refData['refTableName'].'.'.$refData['refItemColumn'],                          array());        }        $categoryId = $this->getData()->parent->id;        $select->where($refData['tableName'].'.category_id = ?', $categoryId);        return $select;    }    protected function _getItemDirectory()    {        return $this->getData()->parent->parent->parent;    }    static public function getTableReferenceData($tableName, $schema = 'Item')    {        $table = new $tableName();        $refMap = $table->info(Zend_Db_Table_Abstract::REFERENCE_MAP);        $refTable = new $refMap[$schema]['refTableClass']();        if (!is_array($refMap[$schema]['columns'])) {            $refMap[$schema]['columns'] = array($refMap[$schema]['columns']);        }        if (!is_array($refMap[$schema]['refColumns'])) {            $refMap[$schema]['refColumns'] = array($refMap[$schema]['refColumns']);        }        return array(            'tableName' => $table->info(Zend_Db_Table_Abstract::NAME),            'itemColumn' => $refMap[$schema]['columns'][0],            'refItemColumn' => $refMap[$schema]['refColumns'][0],            'refTableName' => $refTable->info(Zend_Db_Table_Abstract::NAME)        );    }}