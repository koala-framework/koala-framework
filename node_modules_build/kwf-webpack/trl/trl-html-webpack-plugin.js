"use strict";
var HtmlWebpackPlugin = require("html-webpack-plugin");

class TrlHtmlWebpackPlugin extends HtmlWebpackPlugin {
    htmlWebpackPluginAssets(compilation, chunks) {
        let language = this.options.language;
        let ret = super.htmlWebpackPluginAssets(compilation, chunks);

        chunks.forEach(chunk => {
            if (chunk.files)
                chunk.files.forEach(file => {
                    if (compilation.assets[language + "." + file]) {
                        ret.js.unshift(ret.publicPath + language + "." + file + "?" + compilation.hash);
                    }
                });
        });

        return ret;
    }
}

module.exports = TrlHtmlWebpackPlugin;
