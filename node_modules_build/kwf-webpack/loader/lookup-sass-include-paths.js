'use strict';
const fs = require('fs');
const glob = require("glob");
const path = require("path");

module.exports = function(webPath = '.') {
    const cwd = process.cwd();

    let loadPath = [];
    glob.sync(path.resolve(cwd, `${webPath}/vendor`) + '/*/*').forEach(p => {
        let bowerMain = null;
        let mainExt = null;
        if (fs.existsSync(p+'/bower.json')) {
            let bower = JSON.parse(fs.readFileSync(p + '/bower.json', 'utf8'));
            if (bower.main && typeof bower.main == "string") {
                bowerMain = bower.main;
                mainExt = bowerMain.substr(-5);
            }
        }
        if (mainExt == '.scss' || mainExt == '.sass') {
            let mainDir = bowerMain.substr(0, bowerMain.indexOf('/'));
            loadPath.push(p+'/'+mainDir);
        } else if (fs.existsSync(p+'/scss')) {
            loadPath.push(p+'/scss');
        }
    });
    loadPath.push(path.resolve(cwd, `${webPath}/scss`));
    loadPath.push(path.resolve(cwd, `${webPath}/vendor/koala-framework/koala-framework/sass/Kwf/stylesheets`));
    loadPath.push(path.resolve(cwd, `${webPath}/temp/scss-generated`));
    return loadPath;
};
